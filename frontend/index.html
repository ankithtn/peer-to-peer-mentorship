<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MentorLink — Peer-to-Peer Mentorship</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="loading-overlay" id="loadingOverlay">
      <div class="spinner"></div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <nav class="navbar" id="navbar">
      <div class="nav-inner">
        <a href="#/" class="brand" data-action="go-home">
          <span class="brand-text">MentorLink</span>
        </a>

        <div class="nav-links" id="navGuest">
          <a href="#/login" class="nav-link" data-action="go-login">Sign in</a>
          <a href="#/signup" class="btn btn-primary" data-action="go-signup">Get started</a>
        </div>

        <div class="nav-links" id="navAuth" hidden>
          <a href="#/app/dashboard" class="nav-link" data-view="dashboard">Dashboard</a>
          <a href="#/app/browse" class="nav-link" data-view="browse">Browse</a>
          <a href="#/app/sessions" class="nav-link" data-view="sessions">Sessions</a>
          <a href="#/app/profile" class="nav-link" data-view="profile">Profile</a>
          <button type="button" class="btn btn-ghost" id="btnLogout">Log out</button>
        </div>
      </div>
    </nav>

    <!-- Landing (home): guest only — only this OR login OR signup OR app is visible -->
    <div id="landingPage" class="page-section active">
      <section class="hero">
        <div class="hero-inner">
          <h1 class="hero-title">
            Learn from peers who’ve <span class="hero-accent">been there</span>
          </h1>
          <p class="hero-subtitle">
            Connect with experienced students. Share knowledge, grow together, and accelerate your learning.
          </p>
          <div class="hero-cta">
            <a href="#/signup" class="btn btn-primary btn-lg" data-action="go-signup">Get started</a>
            <a href="#/login" class="btn btn-outline btn-lg" data-action="go-login">Sign in</a>
          </div>
        </div>
      </section>

      <section class="features" id="features">
        <div class="container">
          <h2 class="section-title">Everything you need to succeed</h2>
          <p class="section-subtitle">Features designed for effective peer learning</p>
          <div class="features-grid">
            <div class="feature-card">
              <h3 class="feature-title">Smart matching</h3>
              <p class="feature-desc">Find the right mentor by skills, interests, and availability.</p>
            </div>
            <div class="feature-card">
              <h3 class="feature-title">Flexible scheduling</h3>
              <p class="feature-desc">Book sessions when it works for you.</p>
            </div>
            <div class="feature-card">
              <h3 class="feature-title">Quality feedback</h3>
              <p class="feature-desc">Rate and review to keep mentorship high quality.</p>
            </div>
            <div class="feature-card">
              <h3 class="feature-title">Diverse topics</h3>
              <p class="feature-desc">From DSA to web dev—find mentors for any skill.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="cta-section">
        <div class="container">
          <h2 class="cta-title">Ready to accelerate your learning?</h2>
          <p class="cta-subtitle">Join students already learning together.</p>
          <a href="#/signup" class="btn btn-primary btn-lg" data-action="go-signup">Get started free</a>
        </div>
      </section>
    </div>

    <!-- Full-page Login — separate "page", only visible when route is #/login -->
    <div class="auth-fullpage page-section" id="loginPage">
      <div class="auth-fullpage-inner">
        <a href="#/" class="auth-back" data-action="go-home">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back to home
        </a>
        <div class="auth-card">
          <h1 class="auth-card-title">Sign in</h1>
          <p class="auth-card-subtitle">Sign in to continue to MentorLink</p>
          <form class="auth-form" id="formLogin">
            <div class="form-group">
              <label class="form-label" for="loginEmail">Email</label>
              <input id="loginEmail" type="email" class="form-input" name="email" required placeholder="you@example.com" autocomplete="email" />
            </div>
            <div class="form-group">
              <label class="form-label" for="loginPassword">Password</label>
              <input id="loginPassword" type="password" class="form-input" name="password" required placeholder="••••••••" autocomplete="current-password" />
            </div>
            <button type="submit" class="btn btn-primary btn-block">Sign in</button>
            <div class="form-message" id="loginMessage"></div>
          </form>
          <p class="auth-switch">
            Don’t have an account? <a href="#/signup" data-action="go-signup">Get started</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Full-page Signup — separate "page", only visible when route is #/signup -->
    <div class="auth-fullpage page-section" id="signupPage">
      <div class="auth-fullpage-inner">
        <a href="#/" class="auth-back" data-action="go-home">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back to home
        </a>
        <div class="auth-card">
          <h1 class="auth-card-title">Create your account</h1>
          <p class="auth-card-subtitle">Start your learning journey today</p>
          <form class="auth-form" id="formSignup">
            <div class="form-group">
              <label class="form-label" for="signupName">Full name</label>
              <input id="signupName" type="text" class="form-input" name="name" required placeholder="Jordan Smith" autocomplete="name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="signupEmail">Email</label>
              <input id="signupEmail" type="email" class="form-input" name="email" required placeholder="you@example.com" autocomplete="email" />
            </div>
            <div class="form-group">
              <label class="form-label" for="signupPassword">Password</label>
              <input id="signupPassword" type="password" class="form-input" name="password" required placeholder="Create a password" autocomplete="new-password" />
            </div>
            <div class="form-group">
              <label class="form-label" for="signupRole">I want to…</label>
              <select id="signupRole" class="form-input" name="role">
                <option value="mentee">Learn from others (Mentee)</option>
                <option value="mentor">Share my knowledge (Mentor)</option>
                <option value="both">Both</option>
              </select>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Skills (optional)</label>
                <input type="text" class="form-input" name="skills" placeholder="Python, React, etc." />
              </div>
              <div class="form-group">
                <label class="form-label">Interests (optional)</label>
                <input type="text" class="form-input" name="interests" placeholder="AI, Web dev, etc." />
              </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Create account</button>
            <div class="form-message" id="signupMessage"></div>
          </form>
          <p class="auth-switch">
            Already have an account? <a href="#/login" data-action="go-login">Sign in</a>
          </p>
        </div>
      </div>
    </div>

    <!-- App (dashboard, browse, sessions, profile) — only when logged in, separate from landing/auth -->
    <div id="appInterface" class="page-section">
      <div class="app-container">
        <aside class="sidebar">
          <div class="sidebar-header">
            <div class="user-profile">
              <div class="user-avatar" id="userAvatar">?</div>
              <div class="user-info">
                <div class="user-name" id="userName">—</div>
                <div class="user-role" id="userRole">—</div>
              </div>
            </div>
          </div>
          <nav class="sidebar-nav">
            <a href="#/app/dashboard" class="sidebar-link active" data-view="dashboard">Dashboard</a>
            <a href="#/app/browse" class="sidebar-link" data-view="browse">Browse</a>
            <a href="#/app/sessions" class="sidebar-link" data-view="sessions">Sessions</a>
            <a href="#/app/profile" class="sidebar-link" data-view="profile">Profile</a>
          </nav>
        </aside>

        <main class="main-content">
          <div class="view" id="viewDashboard">
            <div class="view-header">
              <h1 class="view-title">Dashboard</h1>
              <p class="view-subtitle">Welcome back. Here’s your overview.</p>
            </div>
            <div class="dashboard-stats">
              <div class="stat-card">
                <div class="stat-value" id="statTotalSessions">0</div>
                <div class="stat-label">Total sessions</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="statPending">0</div>
                <div class="stat-label">Pending</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="statCompleted">0</div>
                <div class="stat-label">Completed</div>
              </div>
            </div>
            <div class="dashboard-content" id="dashboardContent"></div>
          </div>

          <div class="view" id="viewBrowse" hidden>
            <div class="view-header">
              <h1 class="view-title">Browse mentors</h1>
              <p class="view-subtitle">Find a mentor for your goals.</p>
            </div>
            <div class="browse-filters">
              <input type="text" class="search-input" id="searchInput" placeholder="Search by name, skill, interest…" />
              <select class="filter-select" id="roleFilter">
                <option value="">All roles</option>
                <option value="mentor">Mentor</option>
                <option value="mentee">Mentee</option>
                <option value="both">Both</option>
              </select>
              <button type="button" class="btn btn-outline" id="btnRefresh">Refresh</button>
            </div>
            <div class="mentors-grid" id="mentorsList"></div>
            <div class="empty-state" id="mentorsEmpty" hidden>
              <p>No mentors found</p>
            </div>
          </div>

          <div class="view" id="viewSessions" hidden>
            <div class="view-header">
              <h1 class="view-title">Sessions</h1>
              <p class="view-subtitle">Manage your mentorship sessions.</p>
            </div>
            <div class="sessions-tabs">
              <button type="button" class="tab-btn active" data-tab="all">All</button>
              <button type="button" class="tab-btn" data-tab="pending">Pending</button>
              <button type="button" class="tab-btn" data-tab="accepted">Accepted</button>
              <button type="button" class="tab-btn" data-tab="completed">Completed</button>
            </div>
            <div class="sessions-list" id="sessionsList"></div>
            <div class="empty-state" id="sessionsEmpty" hidden>
              <p>No sessions yet</p>
              <button type="button" class="btn btn-primary" data-view="browse">Browse mentors</button>
            </div>
          </div>

          <div class="view" id="viewProfile" hidden>
            <div class="view-header">
              <h1 class="view-title">Profile</h1>
              <p class="view-subtitle">Update your information.</p>
            </div>
            <form class="profile-form" id="formProfile">
              <div class="form-section">
                <h3 class="form-section-title">Basic information</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label">Full name</label>
                    <input type="text" class="form-input" name="name" required />
                  </div>
                  <div class="form-group">
                    <label class="form-label">Role</label>
                    <select class="form-input" name="role">
                      <option value="mentee">Mentee</option>
                      <option value="mentor">Mentor</option>
                      <option value="both">Both</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Bio</label>
                  <textarea class="form-input" name="bio" rows="4" placeholder="Tell others about yourself…"></textarea>
                </div>
              </div>
              <div class="form-section">
                <h3 class="form-section-title">Skills & interests</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label">Skills (comma-separated)</label>
                    <input type="text" class="form-input" name="skills" placeholder="e.g. Python, React" />
                  </div>
                  <div class="form-group">
                    <label class="form-label">Interests (comma-separated)</label>
                    <input type="text" class="form-input" name="interests" placeholder="e.g. Web dev, AI" />
                  </div>
                </div>
              </div>
              <div class="form-section" id="experienceSection">
                <h3 class="form-section-title">Experience (mentors)</h3>
                <div class="form-group">
                  <label class="form-label">Years of experience</label>
                  <input type="number" class="form-input" name="experience_years" min="0" max="50" placeholder="e.g. 5" />
                </div>
                <div class="form-group">
                  <label class="form-label">Your experience</label>
                  <textarea class="form-input" name="experience" rows="4" placeholder="Achievements, projects…"></textarea>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
              <div class="form-message" id="profileMessage"></div>
            </form>
          </div>
        </main>
      </div>
    </div>

    <!-- Modals (request session, feedback, meeting link) -->
    <div class="modal" id="requestModal">
      <div class="modal-overlay" data-action="close-request"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Request a session</h3>
          <button type="button" class="modal-close" data-action="close-request" aria-label="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="modal-body">
          <div id="requestMentorInfo"></div>
          <form id="formRequest">
            <input type="hidden" name="mentor_id" />
            <div class="form-group">
              <label class="form-label">Topic</label>
              <input type="text" class="form-input" name="topic" required placeholder="e.g. React Hooks" />
            </div>
            <div class="form-group">
              <label class="form-label">Description (optional)</label>
              <textarea class="form-input" name="description" rows="3" placeholder="What do you want to learn?"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Scheduled time (optional)</label>
              <input type="datetime-local" class="form-input" name="scheduled_time" />
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" data-action="close-request">Cancel</button>
              <button type="submit" class="btn btn-primary">Send request</button>
            </div>
            <div class="form-message" id="requestMessage"></div>
          </form>
        </div>
      </div>
    </div>

    <div class="modal" id="feedbackModal">
      <div class="modal-overlay" data-action="close-feedback"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Leave feedback</h3>
          <button type="button" class="modal-close" data-action="close-feedback" aria-label="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="modal-body">
          <div id="feedbackSessionInfo"></div>
          <form id="formFeedback">
            <input type="hidden" name="session_id" />
            <div class="form-group">
              <label class="form-label">Rating</label>
              <div class="rating-input" id="ratingInput">
                <button type="button" class="star" data-rating="1">★</button>
                <button type="button" class="star" data-rating="2">★</button>
                <button type="button" class="star" data-rating="3">★</button>
                <button type="button" class="star" data-rating="4">★</button>
                <button type="button" class="star" data-rating="5">★</button>
              </div>
              <input type="hidden" name="rating" value="5" />
            </div>
            <div class="form-group">
              <label class="form-label">Comment (optional)</label>
              <textarea class="form-input" name="comment" rows="4" placeholder="Share your experience…"></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" data-action="close-feedback">Cancel</button>
              <button type="submit" class="btn btn-primary">Submit feedback</button>
            </div>
            <div class="form-message" id="feedbackMessage"></div>
          </form>
        </div>
      </div>
    </div>

    <div class="modal" id="meetingLinkModal">
      <div class="modal-overlay" data-action="close-meeting-link"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Add meeting link</h3>
          <button type="button" class="modal-close" data-action="close-meeting-link" aria-label="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-description">Share a Zoom, Google Meet, or any meeting link with the mentee.</p>
          <form id="formMeetingLink">
            <input type="hidden" id="meetingLinkSessionId" />
            <div class="form-group">
              <label class="form-label">Meeting link (optional)</label>
              <input type="url" class="form-input" id="meetingLinkInput" placeholder="https://meet.google.com/…" />
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" data-action="close-meeting-link">Skip</button>
              <button type="submit" class="btn btn-primary">Accept session</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- View mentor feedback modal (clean UI instead of browser alert) -->
    <div class="modal" id="viewFeedbackModal">
      <div class="modal-overlay" data-action="close-view-feedback"></div>
      <div class="modal-content modal-feedback-list">
        <div class="modal-header">
          <h3 class="modal-title">Mentor feedback</h3>
          <button type="button" class="modal-close" data-action="close-view-feedback" aria-label="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="modal-body">
          <p class="view-feedback-subtitle" id="viewFeedbackSubtitle">Reviews from mentees</p>
          <div class="feedback-list" id="viewFeedbackList"></div>
        </div>
      </div>
    </div>

    <script type="module" src="js/main.js"></script>
  </body>
</html>
